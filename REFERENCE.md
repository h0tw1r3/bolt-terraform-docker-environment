# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Classes

#### Public Classes

* [`btde::bootstrap`](#btde--bootstrap): bootstrap node

#### Private Classes

* `btde::bootstrap::base`: bootstrap any role
* `btde::bootstrap::primary`: bootstrap primary puppet server

### Functions

* [`btde::abspath`](#btde--abspath): Converts the path name of a file to an absolute path name.
* [`btde::getgroup`](#btde--getgroup): Returns the group information for the specified group id or name
* [`btde::getuser`](#btde--getuser): Returns the passwd information for the user with specified login id or name
* [`btde::hash_passwd`](#btde--hash_passwd): Generates a SHA512 passwd (shadow) suitable hash using a fqdn_rand salt
* [`btde::to_json`](#btde--to_json): Convert Array or Hash to JSON
* [`deep_merge`](#deep_merge): Recursively merges two or more hashes together and returns the resulting hash.

### Plans

* [`btde::bootstrap`](#btde--bootstrap): bootstrap nodes
* [`btde::local::ssh_config`](#btde--local--ssh_config): manage local ssh_config for docker instances in ~/.ssh/btde_config
* [`btde::terraform`](#btde--terraform): manage nodes on aws with terraform

## Classes

### <a name="btde--bootstrap"></a>`btde::bootstrap`

bootstrap node

#### Parameters

The following parameters are available in the `btde::bootstrap` class:

* [`custom_facts`](#-btde--bootstrap--custom_facts)
* [`packages`](#-btde--bootstrap--packages)
* [`role_map`](#-btde--bootstrap--role_map)

##### <a name="-btde--bootstrap--custom_facts"></a>`custom_facts`

Data type: `Array`

Create custom facts on the node for these fact names

Default value: `[]`

##### <a name="-btde--bootstrap--packages"></a>`packages`

Data type: `Array`

See hiera data/common.yaml

Default value: `[]`

##### <a name="-btde--bootstrap--role_map"></a>`role_map`

Data type: `Hash`

See hiera data/common.yaml

Default value: `{}`

## Functions

### <a name="btde--abspath"></a>`btde::abspath`

Type: Ruby 4.x API

Converts the path name of a file to an absolute path name.

#### Examples

##### 

```puppet
$path = btde::abspath('../../somepath')
```

#### `btde::abspath(String $path)`

The btde::abspath function.

Returns: `String` Absolute path name

##### Examples

###### 

```puppet
$path = btde::abspath('../../somepath')
```

##### `path`

Data type: `String`

Path name to convert

### <a name="btde--getgroup"></a>`btde::getgroup`

Type: Ruby 4.x API

Returns the group information for the specified group id or name

#### Examples

##### 

```puppet
$group_zero = btde::getgroup(0)
$group_nobody = btde::getgroup('nobody')
```

#### `btde::getgroup(Variant[Integer,String] $key)`

The btde::getgroup function.

Returns: `Variant[Hash,Undef]` Group structure or undef if not found

##### Examples

###### 

```puppet
$group_zero = btde::getgroup(0)
$group_nobody = btde::getgroup('nobody')
```

##### `key`

Data type: `Variant[Integer,String]`

Group id or name

### <a name="btde--getuser"></a>`btde::getuser`

Type: Ruby 4.x API

Returns the passwd information for the user with specified login id or name

#### Examples

##### 

```puppet
$root_user = btde::getuser(0)
$current_user = btde::getuser(system::env('USER'))
```

#### `btde::getuser(Variant[String,Integer] $key)`

The btde::getuser function.

Returns: `Variant[Hash,Undef]` Passwd structure or undef if not found

##### Examples

###### 

```puppet
$root_user = btde::getuser(0)
$current_user = btde::getuser(system::env('USER'))
```

##### `key`

Data type: `Variant[String,Integer]`

User login id or name

### <a name="btde--hash_passwd"></a>`btde::hash_passwd`

Type: Ruby 4.x API

Generates a SHA512 passwd (shadow) suitable hash using a fqdn_rand salt

#### Examples

##### 

```puppet
$hash = btde::hash_passwd('super secure stuff here')
```

#### `btde::hash_passwd(Variant[Sensitive,String] $password)`

The btde::hash_passwd function.

Returns: `String` SHA-512 passwd hash

##### Examples

###### 

```puppet
$hash = btde::hash_passwd('super secure stuff here')
```

##### `password`

Data type: `Variant[Sensitive,String]`

Value to generate a passwd hash for

### <a name="btde--to_json"></a>`btde::to_json`

Type: Ruby 4.x API

Convert Array or Hash to JSON

#### Examples

##### 

```puppet
$test = [1,2,3]
$json = btde::to_json($test)
```

#### `btde::to_json(Variant[Hash,Array] $value)`

The btde::to_json function.

Returns: `String` value converted to JSON

##### Examples

###### 

```puppet
$test = [1,2,3]
$json = btde::to_json($test)
```

##### `value`

Data type: `Variant[Hash,Array]`

value to convert to JSON

### <a name="deep_merge"></a>`deep_merge`

Type: Ruby 3.x API

Recursively merges two or more hashes together and returns the resulting hash.

#### Examples

##### Example usage

```puppet

$hash1 = {'one' => 1, 'two' => 2, 'three' => { 'four' => 4 } }
$hash2 = {'two' => 'dos', 'three' => { 'five' => 5 } }
$merged_hash = deep_merge($hash1, $hash2)

The resulting hash is equivalent to:

$merged_hash = { 'one' => 1, 'two' => 'dos', 'three' => { 'four' => 4, 'five' => 5 } }

When there is a duplicate key that is a hash, they are recursively merged.
When there is a duplicate key that is not a hash, the key in the rightmost hash will "win."
```

#### `deep_merge()`

The deep_merge function.

Returns: `Hash` The merged h

##### Examples

###### Example usage

```puppet

$hash1 = {'one' => 1, 'two' => 2, 'three' => { 'four' => 4 } }
$hash2 = {'two' => 'dos', 'three' => { 'five' => 5 } }
$merged_hash = deep_merge($hash1, $hash2)

The resulting hash is equivalent to:

$merged_hash = { 'one' => 1, 'two' => 'dos', 'three' => { 'four' => 4, 'five' => 5 } }

When there is a duplicate key that is a hash, they are recursively merged.
When there is a duplicate key that is not a hash, the key in the rightmost hash will "win."
```

## Plans

### <a name="btde--bootstrap"></a>`btde::bootstrap`

bootstrap nodes

#### Parameters

The following parameters are available in the `btde::bootstrap` plan:

* [`targets`](#-btde--bootstrap--targets)
* [`noop`](#-btde--bootstrap--noop)
* [`ssh_config`](#-btde--bootstrap--ssh_config)

##### <a name="-btde--bootstrap--targets"></a>`targets`

Data type: `TargetSpec`

targets to apply bootstrap

Default value: `'docker'`

##### <a name="-btde--bootstrap--noop"></a>`noop`

Data type: `Boolean`

no changes, only report what would change

Default value: `false`

##### <a name="-btde--bootstrap--ssh_config"></a>`ssh_config`

Data type: `Boolean`

maintain local ssh client configuration

Default value: `true`

### <a name="btde--local--ssh_config"></a>`btde::local::ssh_config`

manage local ssh_config for docker instances in ~/.ssh/btde_config

#### Parameters

The following parameters are available in the `btde::local::ssh_config` plan:

* [`noop`](#-btde--local--ssh_config--noop)

##### <a name="-btde--local--ssh_config--noop"></a>`noop`

Data type: `Boolean`

no changes, only report what would change

Default value: `false`

### <a name="btde--terraform"></a>`btde::terraform`

manage nodes on aws with terraform

#### Parameters

The following parameters are available in the `btde::terraform` plan:

* [`destroy`](#-btde--terraform--destroy)
* [`output`](#-btde--terraform--output)

##### <a name="-btde--terraform--destroy"></a>`destroy`

Data type: `Boolean`

Destroy all terraform resources

Default value: `false`

##### <a name="-btde--terraform--output"></a>`output`

Data type: `Boolean`

Display terraform output

Default value: `false`

